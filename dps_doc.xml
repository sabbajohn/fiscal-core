<?xml version="1.0" encoding="UTF-8"?>
<!--
  DPS (Declaração de Prestação de Serviço) — EXEMPLO DOCUMENTACIONAL / HOMOLOGAÇÃO
  Município: Joinville/SC (IBGE 4209102)
  Serviço: Desenvolvimento de software

  Ideia do fluxo:
  1) Você ENVIA a DPS (este XML) para recepção.
  2) O Ambiente Nacional valida e, se aprovar, GERA a NFS-e.
  3) Na NFS-e autorizada (XML diferente), aparecem os valores calculados como vBC e vISSQN.

  Observações importantes deste exemplo:
  - Mantemos o namespace oficial do Ambiente Nacional.
  - Incluímos tanto o atributo Id quanto a tag <id> (mesmo valor).
  - Em tribMun na DPS, você informa REGRAS (incidência, retenção, alíquota),
    mas NÃO envia vISSQN e NÃO envia base de cálculo (isso vem na NFS-e).
-->
<DPS xmlns="http://www.sped.fazenda.gov.br/nfse" versao="1.00">

    <!--
    infDPS: bloco principal da DPS.
    O atributo Id é case-sensitive e costuma ser usado na assinatura digital (URI="#...").
    Regra: não use id="..." minúsculo aqui; use apenas Id="...".
  -->
    <infDPS Id="DPS420910228318834200010400900000000000000001">

        <!--
      id (tag): identificador do documento no conteúdo.
      Regra comum: deve ser igual ao atributo Id.
      Regra de negócio: geralmente composto por "DPS" + cLocEmi + tipoInscrição + inscrição + série + nDPS (com padding).
    -->
        <!-- <id>DPS420910228318834200010400900000000000000001</id> -->
        <!-- tpAmb: 1=Produção | 2=Homologação -->
        <tpAmb>2</tpAmb>


        <!-- dhEmi: data/hora de emissão (ISO 8601). "Z" = UTC -->
        <dhEmi>2026-02-14T00:37:00-03:00</dhEmi>

        <!-- verAplic: identificação do sistema emissor -->
        <verAplic>invoiceflow-1.0</verAplic>

        <!--
      serie: série do documento (faixa e formato dependem do manual).
      Aqui: 00900 (5 dígitos).
    -->
        <serie>00900</serie>

        <!--
      nDPS: número da DPS (sequencial por série/emitente).
      Observação: no Id geralmente vai com 15 dígitos (padding), mas o campo em si pode aceitar "1".
    -->
        <nDPS>1</nDPS>

        <!-- dCompet: data de competência do serviço -->
        <dCompet>2026-02-14</dCompet>

        <!-- tpEmit: tipo de emissão (enum do manual; aqui usamos 1 como no seu teste) -->
        <tpEmit>1</tpEmit>

        <!-- cLocEmi: município de emissão (IBGE). Joinville/SC = 4209102 -->
        <cLocEmi>4209102</cLocEmi>

        <!-- =========================
         PRESTADOR (quem presta)
         ========================= -->
        <prest>
            <!-- CNPJ do prestador -->
            <CNPJ>83188342000104</CNPJ>

            <!-- Regime tributário do prestador (enums do manual) -->
            <regTrib>
                <!-- opSimpNac: optante do Simples Nacional (ex.: 1=Sim, 2=Não — confirme no seu manual) -->
                <opSimpNac>1</opSimpNac>
                <!-- regEspTrib: regime especial (0 quando não aplicável) -->
                <regEspTrib>0</regEspTrib>
            </regTrib>
        </prest>

        <!-- ======================
         TOMADOR (quem contrata)
         ====================== -->
        <toma>
            <!-- Identificação do tomador (CPF ou CNPJ; aqui CNPJ) -->
            <CNPJ>18452135000153</CNPJ>

            <!-- Razão social / nome -->
            <xNome>H2T COMERCIO DE PRODUTOS E EQUIPAMENTOS LTDA - ME</xNome>

            <!--
        Observação: alguns fluxos exigem endereço/contato do tomador.
        Só inclua se o XSD/município exigir, para manter o “teste simples”.
      -->
        </toma>

        <!-- ==================
         SERVIÇO PRESTADO
         ================== -->
        <serv>
            <!-- Local da prestação -->
            <locPrest>
                <!-- Município IBGE onde o serviço é considerado prestado -->
                <cLocPrestacao>4209102</cLocPrestacao>
            </locPrest>

            <cServ>
                <!-- Código de tributação nacional (tabela do Ambiente Nacional) -->
                <cTribNac>010701</cTribNac>

                <!-- Descrição do serviço (texto livre; descreva bem o que foi feito e período) -->
                <xDescServ>2 (DOIS) USUARIOS DEMANDER.</xDescServ>
            </cServ>
        </serv>

        <!-- ==========
         VALORES
         ========== -->
        <valores>

            <!-- Valor do serviço prestado -->
            <vServPrest>
                <vServ>130.00</vServ>
            </vServPrest>

            <!--
        trib: regras tributárias declaradas na DPS.
        IMPORTANTE: Na DPS você declara as regras (incidência, retenção, alíquota),
        mas NÃO manda o valor calculado do imposto (vISSQN) nem base (vBC/vCalc).
        Esses valores aparecem na NFS-e autorizada.
      -->
            <trib>
                <tribMun>
                    <!-- tribISSQN: indica incidência de ISS (enum do manual; aqui "1") -->
                    <tribISSQN>1</tribISSQN>

                    <!-- tpRetISSQN: retenção do ISS (enum do manual; aqui "1" conforme seu cenário) -->
                    <tpRetISSQN>1</tpRetISSQN>

                    <!-- pAliq: alíquota (quando aplicável) -->
                    <!-- <pAliq>2.00</pAliq> -->

                    <!--
            NÃO INCLUIR na DPS (em geral):
            <vCalc>...</vCalc>   (não previsto no seu leiaute para este ponto)
            <vISSQN>...</vISSQN> (valor calculado — aparece na NFS-e, não na DPS)
          -->
                </tribMun>

                <!-- Transparência de tributos (totais estimados). Se não usar, mantém 0.00 -->
                <totTrib>
                    <vTotTrib>
                        <vTotTribFed>0.00</vTotTribFed>
                        <vTotTribEst>0.00</vTotTribEst>
                        <!-- Aqui você pode manter estimativa municipal (ex.: o ISS estimado) se o manual permitir -->
                        <vTotTribMun>2.60</vTotTribMun>
                    </vTotTrib>
                    <!-- <pTotTrib>
                        <pTotTribFed>0.00</pTotTribFed>
                        <pTotTribEst>0.00</pTotTribEst>
                        <pTotTribMun>2.00</pTotTribMun>
                    </pTotTrib> -->
                </totTrib>
            </trib>

        </valores>
    </infDPS>
</DPS>
